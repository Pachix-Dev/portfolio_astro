---
import { getCollection, type CollectionEntry } from 'astro:content'
import ProyectDetail from '../../components/ProyectDetail.astro'
import Layout from '../../layouts/Layout.astro'
import { getMessages } from '../../i18n/ui'

const copy = getMessages('es')

export async function getStaticPaths() {
  const proyects = await getCollection('proyects')

  return proyects
    .filter((entry) => entry.id.startsWith('es/'))
    .map((proyect) => ({
      params: { id: proyect.slug.replace('es/', '') },
      props: { proyect },
    }))
}

interface Props {
  proyect: CollectionEntry<'proyects'>
}

const { proyect } = Astro.props

export const prerender = true
---

<Layout
  title={`${proyect.data.title} - ${copy.pageSuffix}`}
  description={proyect.data.description}
>
  <ProyectDetail proyect={proyect} locale='es' />
</Layout>
