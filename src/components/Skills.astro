---
import { getMessages, normalizeLocale } from '../i18n/ui'
import { skills } from '../data/skills'

const locale = normalizeLocale(Astro.props.locale ?? Astro.currentLocale)
const t = getMessages(locale)

---

<section class='py-20 px-4' aria-label={t.skillsDescription || 'Skills'}>
  <div class='max-w-6xl mx-auto'>
    <!-- Header -->
    <div class='text-center mb-16 timeline-view animate-fade-in-up animate-range-[entry_10%_contain_30%]'>
      <h2 class='text-4xl md:text-5xl font-bold mb-6 bg-linear-to-r from-violet-600 via-violet-400 to-violet-600 bg-clip-text text-transparent'>
        {t.skillsTitle || 'Habilidades'}
      </h2>
      <p class='text-gray-400 max-w-3xl mx-auto text-lg'>
        {t.skillsDescription || 'Mi principal área de especialización es el desarrollo full-stack. Experiencia en tecnologías modernas para crear aplicaciones web escalables y de alto rendimiento.'}
      </p>
    </div>

    <!-- Skills Grid -->
    <div class='grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-6'>
      {
        skills.map((skill, index) => (
          <article
            class={`skill-card group relative bg-gray-800/50 backdrop-blur-sm rounded-xl p-6 border border-gray-700/50 hover:border-purple-500/50 transition-all duration-300 hover:scale-105 hover:shadow-xl hover:shadow-purple-500/20 timeline-[view(y_700px_auto)] animate-fade-in-up animate-range-[entry_${index * 10}%_cover_${index * 10 + 35}%]`}
            style={`animation-delay: ${index * 0.1}s`}
          >
            <!-- Gradient Background -->
            <div class={`absolute inset-0 bg-linear-to-br ${skill.color} opacity-0 group-hover:opacity-10 rounded-xl transition-opacity duration-300`} />
            
            <!-- Icon -->
            <div class='relative flex flex-col items-center gap-4'>
              <div class={`w-16 h-16 flex items-center justify-center rounded-lg bg-linear-to-br ${skill.color} p-3 transform group-hover:rotate-12 transition-transform duration-300`}>
                <svg
                  class='w-full h-full text-white'
                  viewBox={skill.name === 'AWS' ? '0 0 16 16' : '0 0 24 24'}
                  fill='currentColor'
                  xmlns='http://www.w3.org/2000/svg'
                >
                    <path d={skill.icon} />
                    {skill.icon2 ? <path d={skill.icon2} /> : null}                    
                </svg>
              </div>
              
              <!-- Name -->
              <h3 class='text-sm font-semibold text-gray-300 group-hover:text-white transition-colors text-center'>
                {skill.name}
              </h3>
            </div>

            <!-- Shine Effect -->
            <div class='absolute inset-0 rounded-xl bg-linear-to-r from-transparent via-white/5 to-transparent translate-x-full group-hover:translate-x-full transition-transform duration-1000' />
          </article>
        ))
      }
    </div>
  </div>
</section>

<style>
  .skill-card {
    animation: fadeInUp 0.6s ease-out forwards;
    opacity: 0;
  }

  @keyframes fadeInUp {
    from {
      opacity: 0;
      transform: translateY(20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
</style>